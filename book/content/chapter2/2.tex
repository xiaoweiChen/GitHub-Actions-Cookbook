
Visual Studio Code(VS Code)是世界上最受欢迎且最广泛使用的代码编辑器之一。由于其灵活性,广泛的扩展生态系统以及强大的社区支持,它在开发人员社区中广受欢迎。

VS Code与GitHub具有很高的集成水平。它提供诸如GIT集成,使用GitHub帐户的设置同步,直接访问存储库等功能,以及使用GitHub提供的扩展程序从编辑器内部创建,编辑和管理GitHub Action Workfrows之类的功能。这种紧密的集成简化了工作流的创建过程,并简化了GitHub Action Workflows上的协作。

在此食谱中,我们将安装VS Code扩展名,以进行GitHub操作,并检查您可以使用它的操作。

\mySubsubsection{2.2.1}{Getting ready}

在开始之前，请检查您的电子邮件地址和名称是否正确设置在git中：

\begin{shell}
$ git config --global user.email
$ git config --global user.name
\end{shell}

请记住,我们在公共存储库中工作。如果要保留电子邮件地址,请使用\url{https://github.com/settings/emails}的邮件地址(请参见图2.1):

\myGraphic{0.4}{content/chapter2/images/1.png}{图2.1 --- 在公共存储库中保留您的电子邮件地址}

此电子邮件地址由您的GitHub用户ID和users.noreply.github.com域中的名称组成：

\begin{shell}
$ git config --global user.email 5276337+wulfland@users.noreply.github.com
\end{shell}

\myGraphic{0.4}{content/chapter2/images/2.png}{图2.2 --- 在本地克隆您的存储库}

我使用SSH来验证,因为我可以在1Password中管理我的SSH键,但是您也可以使用HTTPS 和PAT令牌。您可以在此处在本地找到有关克隆存储库的更多信息:\url{https://docs.github.com/en/repositories/creating-and-managing-repositories/cloning-a-repository}。

\mySubsubsection{2.2.2}{How to do it…}

\begin{enumerate}
\item 
打开VS Code。通过键入[Shift]+[Command]+[X]或[Ctrl]+[Shift]+[X]打开扩展窗口，或者只需单击左侧栏中的扩展图标（参见图2.3）。搜索github的动作，并安装github与验证的徽章（\url{https://marketplace.visualstudio.com/items?itemName=GitHub.vscodegithub-actions}）的动作。如果有必要，重启VS Code，然后用你的GitHub账号登录：

\myGraphic{0.4}{content/chapter2/images/3.png}{图2.3 --- 安装VS Code的GitHub操作扩展}

扩展名提供以下功能：

\begin{itemize}
\item 
管理工作流和监视工作流运行

\item 
手动触发工作流

\item 
工作流和表达式的语法高亮显示

\item 
综合文件

\item 
验证和代码完成

\item 
智能验证
\end{itemize}

智能验证尤其有很大的帮助。它支持参考操作和可重复使用的工作流的代码完成,将解析参数,输入和输出,以供参考操作,并提供验证,代码完成和内联文档。

\item 
打开本地克隆的存储库。有多种方法可以做到这一点。你可以输入代码。(。表示本地克隆存储库文件夹内命令行上的当前文件夹)。这将打开一个新的VS Code实例，并打开当前文件夹。或者使用File |在VS Code中打开文件夹，然后选择你克隆存储库的文件夹

\item 
击左侧的GitHub操作图标(请参见图2.4),然后检查当前的分支窗口。您可以在当前分支中看到所有工作流程。每个运行都有工作流的名称和带有哈希的运行ID。您可以扩展工作流程以查看作业和步骤。您可以在VS Code中直接打开作业日志,也可以在浏览器中打开步骤日志:

\myGraphic{0.4}{content/chapter2/images/4.png}{图2.4 --- 检查工作流程在当前分支中运行}

\item 
工作流窗口显示主分支中存储库中的所有工作流程。 您可以将工作流固定到列表的顶部,打开工作流文件进行编辑,或者如果它具有Workflow\_disPatch触发器,则运行Workflow的触发器(请参见图2.5):

\myGraphic{0.4}{content/chapter2/images/5.png}{图2.5 --- 工作流窗口允许您触发和打开工作流程}

打开工作流文件。

\item 
接下来,在工作流文件中使用自动完成。删除第15行中的VAR背后的值。请注意,扩展名知道您的所有变量和秘密(见图2.6):

\myGraphic{0.4}{content/chapter2/images/6.png}{图2.6 --- 自动完成知道您的所有秘密和变量}

它还具有完整的工作流语法。您可以在工作流文件中的任何一点上按[Control] + [spac e]以获取有效元素的列表。

VS Code检测工作流文件中的问题并为其提供快速修复(请参见图2.7):

\myGraphic{0.4}{content/chapter2/images/7.png}{图2.7 --- VS Code为问题提供了快速修复}

\item 
在“设置”窗口中,您可以从存储库中找到所有环境,秘密和变量。您不能创建新的环境,但是可以在环境或存储库中添加秘密和变量,然后编辑或删除它们(请参见图2.8 ):

\myGraphic{0.4}{content/chapter2/images/8.png}{图2.8 --- 从VS Code内部管理环境，秘密和变量}

\end{enumerate}

\mySubsubsection{2.2.3}{How it works…}

借助GitHub操作扩展,VS Code是编写和执行工作流程的理想编辑器,因为您可以在一个地方进行所有工作,并且可以离线工作,并且您具有高级语法突出显示和自动完成工作流和表达式。这就是为什么我们将在书的其余部分中使用它来撰写我们的工作流程的原因。

\mySubsubsection{2.2.4}{There’s more…}

VS Code不仅可以在本地安装,还可以直接在浏览器中使用。在任何GitHub存储库中,只需按dot[.]键直接在浏览器中的VS Code中打开当前存储库,或者按[Shift] + [>]在新的选项卡中打开它。要直接在VS Code中打开存储库,您也可以导航到\url{https://github.dev/< ownerer>/<repository>}。

在Github.dev中,您可以像本地一样使用文件并进行Git:首先,提交更改,然后将其推向GitHub。您可以安装扩展名,并且可以使用GitHub帐户同步VS Code设置。

但是,如果您需要终端或安装一些框架,则必须在本地进行操作或使用GitHub代码(\url{https://github.com/features/codespaces})。代码空间为您提供Microsoft Azure中运行的完整远程开发环境。您每月免费存储120小时15 GB的存储空间(与GitHub Pro计划一起使用180分钟和20 GB);在那之后,您一分钟和GB付款。1 GB的价格为每月0.07美元,机器的计算范围在两核机器的每小时0.18美元之间,至32核机器每小时2.88美元。出于本书的目的,我选择了本地版本,以免在免费的时间里燃烧,但是如果您从未尝试过代码空间,我鼓励您这样做。这是为您正在从事的每个项目拥有专门开发环境的好方法。