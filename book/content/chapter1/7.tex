
æ‚¨å¯ä»¥åœ¨å¯ä»¥åœ¨å·¥ä½œæµä¸­è®¿é—®çš„å­˜å‚¨åº“ä¸­è®¾ç½®å˜é‡å’Œç§˜å¯†ã€‚åœ¨æ­¤é£Ÿè°±ä¸­,æˆ‘ä»¬å°†åŒæ—¶æ·»åŠ å¹¶åœ¨å·¥ä½œæµç¨‹ä¸­è®¿é—®å®ƒä»¬ã€‚

\mySubsubsection{1.7.1}{Getting ready}

åœ¨æ­¤é£Ÿè°±ä¸­,æˆ‘ä»¬å°†ä½¿ç”¨Web UIè®¾ç½®å˜é‡å’Œç§˜å¯†ã€‚æ‚¨ä¹Ÿå¯ä»¥å°†GitHub CLI(\url{https://cli.github.com/})ä½¿ç”¨ã€‚å¦‚æœæ‚¨æƒ³å°è¯•ä¸€ä¸‹,åˆ™å¿…é¡»å®‰è£…å®ƒã€‚ä½†æ˜¯,æ²¡æœ‰å¿…è¦éµå¾ªé£Ÿè°±ã€‚

\mySubsubsection{1.7.2}{How to do itâ€¦}

\begin{enumerate}
\item 
åœ¨æ‚¨çš„å­˜å‚¨åº“ä¸­,å¯¼èˆªåˆ°Settings | Secrets and Variables | Actionsã€‚æ‚¨å¯ä»¥åœ¨å­˜å‚¨åº“ä¸­æŸ¥çœ‹æ‰€æœ‰ç°æœ‰çš„ç§˜å¯†,å¹¶ä¸”å¯ä»¥åœ¨Secrets(settings/
secrets/actions)å’ŒVariables(settings/variables/actions;è¯·å‚è§å›¾1.20)ä¹‹é—´åˆ‡æ¢é€‰é¡¹å¡:

\myGraphic{0.6}{content/chapter1/images/20.png}{å›¾1.20 --- ä¸ºå­˜å‚¨åº“é…ç½®ç§˜å¯†å’Œå˜ï¥¾}

\item 
å•å‡»New repository secret å°†æ‰“å¼€New secret å¯¹è¯æ¡†ï¼ˆsettings/secrets/actions/newï¼›è¯·å‚è§å›¾1.21ï¼‰ï¼š

\myGraphic{0.6}{content/chapter1/images/21.png}{å›¾1.21 --- æ·»åŠ ä¸€ä¸ªæ–°ç§˜å¯†}

å°†my\_secretæ·»åŠ ä¸ºç§˜å¯†åç§°å’Œä¸€ä¸ªéšæœºå•è¯,ä¾‹å¦‚abracadabraä½œä¸ºç§˜å¯†,ç„¶åå•å‡»â€œ Add secretâ€ã€‚ç§˜å¯†å°†åœ¨æ—¥å¿—ä¸­æ©ç›–!å› æ­¤,ä¸è¦ä½¿ç”¨å¯èƒ½åœ¨éšæœºä½œä¸šæˆ–æ­¥éª¤çš„å…¶ä»–è¾“å‡ºä¸­å‘ç”Ÿçš„å¸¸è§å•è¯ã€‚

\begin{myTip}{å‘½åç§˜å¯†å’Œå˜ï¥¾çš„çº¦å®š}
ç§˜å¯†åç§°ä¸æ˜¯å¯¹ç—…ä¾‹æ•æ„Ÿçš„,å®ƒä»¬åªèƒ½åŒ…å«æ™®é€šå­—ç¬¦([A-Z]å’Œ[A-Z]),æ•°å­—([0-9] )å’Œä¸‹åˆ’çº¿(\_)ã€‚ä»–ä»¬ä¸€å®šä¸èƒ½ä»github\_æˆ–ä¸€ä¸ªæ•°å­—å¼€å§‹ã€‚

æœ€å¥½çš„åšæ³•æ˜¯ç”¨å¤§å†™å•è¯å‘½åç§˜å¯†,è¢«ä¸‹åˆ’çº¿è§’è‰²éš”å¼€
\end{myTip}

\item 
é‡å¤New repository variable(settings/variables/actions/new)çš„è¿‡ç¨‹,å¹¶åˆ›å»ºä¸€ä¸ªå…·æœ‰å€¼ä¸–ç•Œçš„WHO\_TO\_GREETå˜é‡ã€‚

\item 
ä»ä¸Šä¸€ä¸ªé£Ÿè°±æ‰“å¼€.github/workflows/myfirstworkflow.ymlæ–‡ä»¶,ç„¶åå•å‡»â€œç¼–è¾‘â€å›¾æ ‡(è¯·å‚è§å›¾1.22):

\myGraphic{0.6}{content/chapter1/images/22.png}{å›¾1.22 --- ç¼–è¾‘myfirstworkflow.yml}

å°†å•è¯Worldæ›´æ”¹ä¸º\verb|${{vars.WHO_TO_GREET}}|è¡¨è¾¾å¼ï¼Œå¹¶ä½¿ç”¨\verb|${{ secrets.MY_SECRET }} |æ·»åŠ æ–°è¡Œ:

\begin{tcolorbox}[ breakable,colback = bashcodebg, colframe= black!50!white]
\scriptsize{
- run: | \\
\hspace*{2em}echo "Hello \$\{\{ vars.WHO\_TO\_GREET \}\} \emoji{ğŸ‘‹} from \$\{\{ github.actor \}\}." \\
\hspace*{2em}echo "My secret is \emoji{ğŸ¤«} '\$\{\{ secrets.MY\_SECRET \}\}'."
}
\end{tcolorbox}

\item 
æäº¤ï¤æ”¹ã€‚å·¥ä½œæµå°†è‡ªåŠ¨è¿ï¨ˆã€‚æ£€æŸ¥å·¥ä½œæµæ—¥å¿—ä¸­çš„è¾“å‡ºã€‚çœ‹èµ·æ¥åº”è¯¥åƒå›¾1.23ï¼š

\myGraphic{0.6}{content/chapter1/images/23.png}{å›¾1.23 --- æ—¥å¿—ä¸­ç§˜å¯†å’Œå˜ï¥¾çš„è¾“å‡º}

\end{enumerate}

\mySubsubsection{1.7.3}{Thereâ€™s moreâ€¦}

æ‚¨å¯ä»¥é€šè¿‡åœ¨ä»¥ä¸‹çº§åˆ«ä¹‹ä¸€ä¸Šå®šä¹‰å®ƒä»¬æ¥åˆ›å»ºé…ç½®å˜ï¥¾ï¼Œä»¥åœ¨å¤šä¸ªå·¥ä½œæµä¸­ä½¿ç”¨ï¼š

\begin{itemize}
\item 
ç»„ç»‡çº§åˆ«

\item 
å­˜å‚¨åº“çº§åˆ«

\item 
ç¯å¢ƒæ°´å¹³
\end{itemize}

è¿™ä¸‰ä¸ªçº§åˆ«åƒå±‚æ¬¡ç»“æ„ä¸€æ ·å·¥ä½œ:æ‚¨å¯ä»¥é€šè¿‡ä¸ºåŒä¸€é”®æä¾›æ–°å€¼æ¥è¦†ç›–è¾ƒä½çº§åˆ«çš„å˜é‡æˆ–ç§˜å¯†ã€‚å›¾1.24è¯´æ˜äº†å±‚æ¬¡ç»“æ„:

\myGraphic{0.6}{content/chapter1/images/24.png}{å›¾1.24 --- é…ç½®å˜ï¥¾å’Œç§˜å¯†çš„å±‚æ¬¡ç»“æ„}

ç»„ç»‡çš„ç§˜å¯†å’Œå˜é‡çš„å·¥ä½œæ–¹å¼ä¸å­˜å‚¨åº“ç›¸åŒã€‚æ‚¨å¯ä»¥åœ¨Settings | Secrets and variables | Actionsä¸‹åˆ›å»ºä¸€ä¸ªç§˜å¯†æˆ–å˜é‡ã€‚æ–°çš„ç»„ç»‡ç§˜å¯†æˆ–å˜é‡å¯ä»¥å…·æœ‰ä»¥ä¸‹è®¿é—®ç­–ç•¥:

\begin{itemize}
\item 
æ‰€æœ‰å­˜å‚¨åº“(All repositories)

\item 
ç§äººå­˜å‚¨åº“(Private repositories)

\item 
é€‰å®šçš„å­˜å‚¨åº“(Selected repositories)
\end{itemize}

é€‰æ‹©"é€‰å®šçš„å­˜å‚¨åº“"æ—¶,æ‚¨å¯ä»¥æˆäºˆå¯¹å•ä¸ªå­˜å‚¨åº“çš„è®¿é—®ã€‚

é™¤äº†é€šè¿‡UIè®¾ç½®è¿™äº›å€¼å¤–,è¿˜å¯ä»¥ä½¿ç”¨GitHub CLIã€‚

æ‚¨å¯ä»¥ä½¿ç”¨GH Secretæˆ–GHå˜ï¥¾åˆ›å»ºæ–°æ¡ç›®ï¼š

\begin{shell}
$ gh secret set secret-name
$ gh variable set var-name
\end{shell}

æ‚¨å°†æç¤ºæ‚¨çš„ç§˜å¯†æˆ–å˜é‡å€¼,æˆ–è€…æ‚¨å¯ä»¥ä»æ–‡ä»¶ä¸­è¯»å–å€¼,å°†å…¶è¾“é€åˆ°å‘½ä»¤,æˆ–å°†å…¶æŒ‡å®šä¸ºæ­£æ–‡(-bæˆ–-{}-body):

\begin{shell}
$ gh secret set secret-name < secret.txt
$ gh variable set var-name --body config-value
\end{shell}
