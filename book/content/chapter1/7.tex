
å¯ä»¥åœ¨åº“ä¸­è®¾ç½®å˜é‡å’Œå¯†é’¥ï¼Œä»¥ä¾¿åœ¨å·¥ä½œæµç¨‹ä¸­è®¿é—®ã€‚è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†æ·»åŠ è¿™ä¸¤è€…å¹¶åœ¨å·¥ä½œæµç¨‹ä¸­è¿›è¡Œè®¿é—®ã€‚

\mySubsubsection{1.7.1}{Getting ready}

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œå°†ä½¿ç”¨ Web UI æ¥è®¾ç½®å˜é‡å’Œå¯†é’¥,ä¹Ÿå¯ä»¥ä½¿ç”¨ GitHub CLI(\url{https://cli.github.com})æ¥å®Œæˆè¿™é¡¹å·¥ä½œ(éœ€è¦å®‰è£…)ã€‚ä½†å¯¹äºè¿™ä¸ªç¤ºä¾‹æ¥è¯´ï¼ŒGitHub CLIå¹¶ä¸æ˜¯å¿…éœ€çš„ã€‚

\mySubsubsection{1.7.2}{How to do itâ€¦}

\begin{enumerate}
\item 
å¯¼èˆªåˆ°\textbf{Settings | Secrets and Variables | Actions}(è®¾ç½®|å¯†é’¥å’Œå˜é‡|æ“ä½œ)ï¼Œå¯æŸ¥çœ‹åº“ä¸­ç°æœ‰çš„å¯†é’¥ï¼Œå¹¶ä¸”å¯ä»¥åœ¨\textbf{Secrets}(å¯†é’¥)(settings/secrets/actions)å’Œ\textbf{Variables}(å˜é‡)(settings/variables/actions)é€‰é¡¹å¡ä¹‹é—´åˆ‡æ¢ï¼Œå‚è€ƒå›¾ 1.20:

\myGraphic{0.7}{content/chapter1/images/20.png}{å›¾1.20 --- ä¸ºä»£ç åº“é…ç½®å¯†é’¥å’Œå˜é‡}

\item 
ç‚¹å‡»\textbf{New repository secret}(æ–°å»ºä»£ç åº“å¯†é’¥)å°†æ‰“å¼€\textbf{New secret}(æ–°å»ºå¯†é’¥)å¯¹è¯æ¡†(settings/secrets/actions/newï¼›è¯·å‚é˜…å›¾ 1.21)ï¼š

\myGraphic{0.7}{content/chapter1/images/21.png}{å›¾1.21 --- æ·»åŠ æ–°å¯†é’¥}

å°† MY\_SECRET ä½œä¸ºå¯†é’¥åç§°ï¼Œå°†éšæœºå•è¯(ä¾‹å¦‚ Abracadabra)ä½œä¸ºå¯†é’¥ï¼Œç„¶åç‚¹å‡»\textbf{Add secret}(æ·»åŠ å¯†é’¥)ï¼Œæ—¥å¿—ä¸­å°†å±è”½å¯†é’¥ï¼å› æ­¤ï¼Œä¸è¦ä½¿ç”¨å¯èƒ½åœ¨å…¶ä»–ä½œä¸šæˆ–æ­¥éª¤çš„è¾“å‡ºä¸­å‡ºç°çš„å¸¸è§å•è¯ã€‚

\begin{myTip}{å¯†é’¥å’Œå˜é‡çš„å‘½åçº¦å®š}
å¯†é’¥åç§°ä¸åŒºåˆ†å¤§å°å†™ï¼Œå¹¶ä¸”åªèƒ½åŒ…å«æ™®é€šå­—ç¬¦([a-z] å’Œ [A-Z])ã€æ•°å­—([0-9])å’Œä¸‹åˆ’çº¿()ã€‚å®ƒä»¬ä¸èƒ½ä»¥ GITHUB æˆ–æ•°å­—å¼€å¤´ã€‚

æœ€å¥½æ˜¯ä½¿ç”¨å¤§å†™å•è¯ï¼Œå¹¶é€šè¿‡ä¸‹åˆ’çº¿å­—ç¬¦åˆ†éš”æ¥å‘½åå¯†é’¥ã€‚
\end{myTip}

\item 
é‡å¤è¯¥è¿‡ç¨‹ä»¥\textbf{New repository variable}(åˆ›å»ºæ–°çš„ä»£ç åº“å˜é‡)(settings/variables/actions/new)ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªåä¸º WHO\_TO\_GREET ä¸”å€¼ä¸º World çš„å˜é‡ã€‚

\item 
æ‰“å¼€æ¥è‡ªä¸Šä¸€ä¸ªç¤ºä¾‹çš„ .github/workflows/MyFirstWorkflow.yml æ–‡ä»¶ï¼Œå¹¶ç‚¹å‡»ç¼–è¾‘å›¾æ ‡(è¯·å‚é˜…å›¾ 1.22)ï¼š

\myGraphic{0.6}{content/chapter1/images/22.png}{å›¾1.22 --- ç¼–è¾‘ MyFirstWorkflow.yml}

å°†å•è¯Worldæ›´æ”¹ä¸º\verb|${{vars.WHO_TO_GREET}}|è¡¨è¾¾å¼ï¼Œå¹¶ä½¿ç”¨\verb|${{ secrets.MY_SECRET }}| æ·»åŠ ç§˜é’¥:

\begin{tcolorbox}[ breakable,colback = bashcodebg, colframe= black!50!white]
\scriptsize{
- run: | \\
\hspace*{2em}echo "Hello \$\{\{ vars.WHO\_TO\_GREET \}\} \emoji{ğŸ‘‹} from \$\{\{ github.actor \}\}." \\
\hspace*{2em}echo "My secret is \emoji{ğŸ¤«} '\$\{\{ secrets.MY\_SECRET \}\}'."
}
\end{tcolorbox}

\item 
æäº¤æ›´æ”¹ã€‚å·¥ä½œæµå°†è‡ªåŠ¨è¿è¡Œï¼Œæ£€æŸ¥å·¥ä½œæµç¨‹æ—¥å¿—ä¸­çš„è¾“å‡ºï¼Œçœ‹èµ·æ¥ç±»ä¼¼å›¾ 1.23ï¼š

\myGraphic{0.6}{content/chapter1/images/23.png}{å›¾1.23 --- æ—¥å¿—ä¸­å¯†é’¥å’Œå˜é‡çš„è¾“å‡º}

\end{enumerate}

\mySubsubsection{1.7.3}{Thereâ€™s moreâ€¦}

å¯ä»¥é€šè¿‡åœ¨ä»¥ä¸‹æŸä¸ªçº§åˆ«å®šä¹‰ï¼Œæ¥åˆ›å»ºç”¨äºå¤šä¸ªå·¥ä½œæµçš„é…ç½®å˜é‡ï¼š

\begin{itemize}
\item 
ç»„ç»‡çº§åˆ«

\item 
åº“çº§åˆ«

\item 
ç¯å¢ƒçº§åˆ«
\end{itemize}

è¿™ä¸‰ä¸ªçº§åˆ«åƒä¸€ä¸ªå±‚æ¬¡ç»“æ„ï¼šå¯ä»¥é€šè¿‡ä¸ºç›¸åŒçš„é”®æä¾›æ–°å€¼ï¼Œæ¥è¦†ç›–è¾ƒä½çº§åˆ«çš„å˜é‡æˆ–å¯†é’¥ã€‚å›¾ 1.24 å±•ç¤ºäº†è¿™ä¸ªå±‚æ¬¡ç»“æ„ï¼š

\myGraphic{0.6}{content/chapter1/images/24.png}{å›¾1.24 --- é…ç½®å˜é‡å’Œå¯†é’¥çš„å±‚æ¬¡ç»“æ„}

ç»„ç»‡çš„å¯†é’¥å’Œå˜é‡ä¸ä»£ç åº“çš„å¯†é’¥å’Œå˜é‡å·¥ä½œæ–¹å¼ç›¸åŒã€‚æ‚¨å¯ä»¥åœ¨\textbf{Settings | Secrets and variables | Actions}(è®¾ç½®|å¯†é’¥å’Œå˜é‡|æ“ä½œ)ä¸‹åˆ›å»ºä¸€ä¸ªå¯†é’¥æˆ–å˜é‡ã€‚æ–°çš„ç»„ç»‡å¯†é’¥æˆ–å˜é‡å¯ä»¥ä¸ºä»¥ä¸‹å†…å®¹è®¾ç½®è®¿é—®ç­–ç•¥ï¼š

\begin{itemize}
\item 
æ‰€æœ‰åº“(All repositories)

\item 
ç§æœ‰åº“(Private repositories)

\item 
é€‰å®šåº“(Selected repositories)
\end{itemize}

é€‰æ‹©â€œé€‰å®šåº“â€æ—¶,å¯ä»¥æˆäºˆå¯¹å•ä¸ªåº“çš„è®¿é—®ã€‚é™¤äº†é€šè¿‡UIè®¾ç½®è¿™äº›å€¼å¤–,è¿˜å¯ä»¥ä½¿ç”¨GitHub CLIã€‚æ‚¨å¯ä»¥ä½¿ç”¨ gh secret æˆ– gh variable æ¥åˆ›å»ºæ–°æ¡ç›®ï¼š

\begin{shell}
$ gh secret set secret-name
$ gh variable set var-name
\end{shell}

ç³»ç»Ÿä¼šæç¤ºè¾“å…¥å¯†é’¥æˆ–å˜é‡çš„å€¼ï¼Œæˆ–è€…ä»æ–‡ä»¶ä¸­è¯»å–è¯¥å€¼ï¼Œå°†å…¶é€šè¿‡ç®¡é“ä¼ é€’ç»™å‘½ä»¤ï¼Œæˆ–ä½¿ç”¨ -b æˆ– -{}-body é€‰é¡¹è¿›è¡ŒæŒ‡å®šï¼š

\begin{shell}
$ gh secret set secret-name < secret.txt
$ gh variable set var-name --body config-value
\end{shell}
